# üìö OpenAPI –∏ Real-time –ø—Ä–æ—Ç–æ–∫–æ–ª—ã: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## ü§î –ü–æ—á–µ–º—É WebSocket –∏ SSE –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ REST API?

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è OpenAPI 3.0

OpenAPI Specification (—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–∞–∫ Swagger) –±—ã–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è REST API –∏ –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

1. **–ù–µ—Ç –Ω–∞—Ç–∏–≤–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ WebSocket**
   - OpenAPI 3.0 –Ω–µ –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
   - WebSocket –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª (ws://) –≤–º–µ—Å—Ç–æ HTTP
   - –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–≤—è–∑—å –Ω–µ —É–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –≤ –º–æ–¥–µ–ª—å –∑–∞–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç

2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SSE**
   - Server-Sent Events —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç HTTP, –Ω–æ —ç—Ç–æ streaming –ø—Ä–æ—Ç–æ–∫–æ–ª
   - OpenAPI –Ω–µ –º–æ–∂–µ—Ç –æ–ø–∏—Å–∞—Ç—å –ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π
   - –ù–µ—Ç —Å–ø–æ—Å–æ–±–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ

–ö–æ–≥–¥–∞ –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º WebSocket —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤ Elysia:

```typescript
.ws("/ws", {
  body: wsMessageSchema,
  // ...
})
```

OpenAPI –ø–ª–∞–≥–∏–Ω –≤–∏–¥–∏—Ç –ø—É—Ç—å `/ws` –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –µ–≥–æ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–∫–∞–∑–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ö–æ—Ç—è –±—ã –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç—å –∏ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö
- –î–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ

## üõ†Ô∏è –ù–∞—à–∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –æ–ø–∏—Å–∞–Ω–∏—è

```typescript
description: "‚ö†Ô∏è This is a WebSocket endpoint, not a REST API..."
```

### 2. GET —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å HTML –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

–ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ WebSocket —ç–Ω–¥–ø–æ–∏–Ω—Ç—É —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏:
- http://localhost:3000/realtime/ws ‚Üí HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

### 3. –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤ OpenAPI

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä—è–º–æ –≤ –æ–ø–∏—Å–∞–Ω–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

## üîÆ –ë—É–¥—É—â–µ–µ: AsyncAPI

–î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ real-time API —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è - **AsyncAPI**:

```yaml
asyncapi: 2.6.0
channels:
  /realtime/ws:
    subscribe:
      message:
        $ref: '#/components/messages/WebSocketMessage'
    publish:
      message:
        $ref: '#/components/messages/WebSocketResponse'
```

AsyncAPI —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –¥–ª—è:
- WebSocket
- Server-Sent Events
- Message Queues (Kafka, RabbitMQ)
- –î—Ä—É–≥–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ API:
1. –í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –æ–ø–∏—Å–∞–Ω–∏—è real-time —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
2. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è WebSocket/SSE
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –≤ –æ–ø–∏—Å–∞–Ω–∏—è—Ö
4. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AsyncAPI –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π API:
1. –û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö (ws:// vs http://)
2. –ù–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å WebSocket —á–µ—Ä–µ–∑ Swagger UI
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
   - `wscat` –¥–ª—è WebSocket
   - `curl` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –¥–ª—è SSE
   - –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–µ DevTools

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [OpenAPI Specification](https://swagger.io/specification/)
- [AsyncAPI Specification](https://www.asyncapi.com/)
- [WebSocket Protocol RFC](https://datatracker.ietf.org/doc/html/rfc6455)
- [Server-Sent Events W3C](https://www.w3.org/TR/eventsource/)
